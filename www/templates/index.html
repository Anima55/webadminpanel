<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ title }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    </head>
<body>

    <header class="top-nav">
        <div class="nav-left">
            <div class="nav-icon"><a href="/" style="color:white; text-decoration:none;">üõ°Ô∏è –¢–µ–∫—Å—Ç</a></div> 
        </div>

        <nav class="nav-right">
            <a href="/" class="nav-button">HelperInfo</a>
            <a href="/tickets" class="nav-button">TicketInfo (‚Ññ1)</a>
            <a href="{{ url_for('logout') }}" class="nav-button" style="background-color: #dc3545;">–í–∏—Ö—ñ–¥</a>
        </nav>
    </header>

    <main class="site-body">
        
        <section class="main-block">
            
            <div class="search-bar-container">
                <div class="search-input-wrapper">
                    <form method="GET" action="{{ request.path }}">
                    <input type="text" placeholder="–ü–æ—à—É–∫..." class="search-input" name="query" value="{{ request.args.get('query', '') }}">
                    </form>
                </div>
            </div>

            <div class="data-display-container">
                <h2>{{ main_content_title }}</h2>
                
                <table class="data-table">
                    <thead>
                        <tr>
                            {% for header in col_headers %}
                            <th>{{ header }}</th>
                            {% endfor %}
                            {% if main_content_title.startswith('–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∏') %}
                            <th>–î—ñ—ó</th>
                            {% endif %}
                            </tr>
                    </thead>
                    <tbody>
                        {% for row in table_data %}
                        <tr data-id="{{ row['helper_id'] }}" data-name="{{ row['admin_name'] }}" data-rank="{{ row['admin_rank'] }}" data-warnings="{{ row['warnings_count'] }}">
                            {% for key, value in row.items() %}
                                <td>{{ value }}</td>
                            {% endfor %}
                            
                            {% if main_content_title.startswith('–°–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∏') %}
                            <td>
                                <button class="edit-btn" onclick="openEditModal(this)">–†–µ–¥–∞–≥—É–≤–∞—Ç–∏</button>
                                </td>
                            {% endif %}
                            </tr>
                        {% else %}
...
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            
        </section>

    </main>
    
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeEditModal()">&times;</span>
            <h2>–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞</h2>
            
            <form method="POST" action="{{ url_for('update_helper') }}" id="editForm">
                <input type="hidden" name="helper_id" id="modal_helper_id">
                
                <label for="modal_admin_name">–Ü–º'—è:</label>
                <input type="text" id="modal_admin_name" name="admin_name" required>
                
                <label for="modal_admin_rank">–†–∞–Ω–≥:</label>
                <input type="text" id="modal_admin_rank" name="admin_rank" required>
                
                <label for="modal_warnings_count">–ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è:</label>
                <input type="number" id="modal_warnings_count" name="warnings_count" min="0" required>
                
                <div class="modal-buttons">
                    <button type="submit" class="save-btn">–ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>
                    
                    <form method="POST" action="{{ url_for('delete_helper') }}" id="deleteForm" style="display:inline;">
                        <input type="hidden" name="helper_id" id="modal_delete_helper_id">
                        <button type="submit" class="delete-btn" onclick="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Å–ø—ñ–≤—Ä–æ–±—ñ—Ç–Ω–∏–∫–∞ ID ' + document.getElementById('modal_delete_helper_id').value + '?');">–í–∏–¥–∞–ª–∏—Ç–∏</button>
                    </form>

                    <button type="button" class="delete-btn" onclick="closeEditModal()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                </div>
            </form>
        </div>
    </div>
    <script src="{{ url_for('script', filename='helpinfo.js') }}"></script>

</body>
</html>